<main>
   <div>
      <div [ngClass]="{
         'px-5': isLargeScreen,
         'container': !isLargeScreen
       }">
         <div class="row align-items-start">
            <div class="col-md-12">
               <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                     <div class="row">
                        <div>
                           <li class="breadcrumb-item active" aria-current="page">
                              {{reviewData.titulo_revision}}</li>
                        </div>
                     </div>
                  </ol>
               </nav>
            </div>
         </div>
         <br>
         <div class="row">
            <div class="col col-sm col-md-2">
               <div class="d-flex">
                  <div class="floating-menu">
                     <!-- Descripción general -->
                     <div class="menu-item " [routerLink]="['/detalle_revision']" [queryParams]="{ id: reviewId }">
                        Descripción general
                     </div>

                     <!-- Planificación -->
                     <div class="menu-item" [routerLink]="['/planificacion']" [queryParams]="{ id: reviewId }">
                        Planificación
                     </div>

                     <!-- Revisión de datos -->
                     <div class="menu-item" [routerLink]="['/estudios']" [queryParams]="{ id: reviewId }">
                        Revisión de datos
                     </div>

                     <!-- Extracción de datos -->
                     <div class="menu-item" [routerLink]="['/extraccion_datos']" [queryParams]="{ id: reviewId }">
                        Extracción de datos
                     </div>

                     <!-- Proyección de informes -->
                     <div class="menu-item active" [routerLink]="['/informes']" [queryParams]="{ id: reviewId }">
                        Proyección de informes
                     </div>
                  </div>
               </div>
               <br />
            </div>

            <div class="col col-sm col-md-10">
               <div class="accordion container" id="accordionExample">
                  <!-- Primer ítem del acordeón -->
                  <div class="accordion-item">
                     <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                           data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                           <strong>Borrador de artículo científico</strong>
                        </button>
                     </h2>

                     <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                           <div class="container mt-4">

                              <!-- Sección: Introducción -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Introducción</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera un borrador de la Introducción, donde se presenta la motivación
                                       y el contexto general de la investigación.
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar introducción con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Sección: Trabajos relacionados -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Trabajos relacionados</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera un borrador de la sección de trabajos relacionados (estado del arte)
                                       que describa la investigación previa relevante.
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar trabajos relacionados con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Sección: Metodología -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Metodología</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera un borrador de la Metodología empleada en el estudio,
                                       detallando los procedimientos, técnicas y herramientas.
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar metodología con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Sección: Resultados -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Resultados</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera un borrador de la sección de Resultados, presentando y discutiendo
                                       los hallazgos de la investigación.
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar resultados con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Sección: Discusión -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Discusión</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera un borrador de la Discusión, analizando e interpretando los resultados
                                       en profundidad.
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar discusión con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Sección: Limitaciones -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Limitaciones</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera un borrador de Limitaciones, describiendo los posibles sesgos
                                       o restricciones del estudio.
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar limitaciones con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Sección: Conclusión -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Conclusión</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera un borrador de la Conclusión, resumiendo los hallazgos y aportes
                                       principales del estudio.
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar conclusión con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Sección: Referencias -->
                              <div class="card mb-3">
                                 <div class="card-header bg-light">
                                    <strong>Referencias</strong>
                                 </div>
                                 <div class="card-body">
                                    <p class="text-muted">
                                       Genera una lista de referencias bibliográficas para tu artículo, siguiendo
                                       el formato deseado (APA, IEEE, etc.).
                                    </p>
                                    <button class="btn btn-primary mb-2" title="Generar referencias con IA">
                                       Generar texto con IA
                                    </button>
                                 </div>
                              </div>

                              <!-- Botón para generar todo el borrador completo (opcional) -->
                              <button class="btn btn-success mb-4" title="Generar todo el borrador">
                                 Generar documento científico completo
                              </button>

                              <!-- Tabla con columnas: Documento científico y Acción -->
                              <table class="table table-bordered">
                                 <thead>
                                    <tr>
                                       <th>Documento científico</th>
                                       <th>Acción</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr>
                                       <td>Ejemplo_de_documento.docx</td>
                                       <td>
                                          <!-- Botón de borrar con ícono -->
                                          <button class="btn btn-danger btn-sm" title="Eliminar">
                                             <i class="bi bi-trash"></i>
                                          </button>
                                       </td>
                                    </tr>
                                    <!-- Agrega más filas aquí según sea necesario -->
                                 </tbody>
                              </table>
                           </div> <!-- /container -->
                        </div> <!-- /accordion-body -->
                     </div> <!-- /accordion-collapse -->
                  </div> <!-- /accordion-item -->



                  <!-- Segundo ítem del acordeón -->
                  <div class="accordion-item">
                     <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                           data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne"
                           (click)="centerAndUnlock()">
                           <strong>Diagrama de Flujo PRISMA</strong>
                        </button>
                     </h2>
                     <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body" style="position: relative; width: 100%; height: 550px;">
                           <div style="position: relative; width: 100%; height: 420px;">
                              <!-- Contenedor flex para distribuir los botones -->
                              <div class="d-flex justify-content-between align-items-center mb-2" style="width: 100%;">

                                 <!-- Grupo de botones de zoom (alineado a la izquierda) -->
                                 <div class="btn-group">
                                    <button class="btn btn-primary" (click)="zoomIn()">
                                       <i class="bi bi-zoom-in"></i>
                                    </button>
                                    <button class="btn btn-primary" (click)="zoomOut()">
                                       <i class="bi bi-zoom-out"></i>
                                    </button>
                                 </div>

                                 <!-- Botón de centrar (en el centro) -->
                                 <div class="btn-group">
                                    <button class="btn btn-info" (click)="centerAndUnlock()">
                                       <i class="bi bi-arrows-fullscreen"></i>
                                    </button>
                                 </div>

                                 <!-- Grupo de botones de descarga (alineado a la derecha) -->
                                 <div class="btn-group">
                                    <button class="btn btn-secondary" (click)="downloadPNG()">
                                       <i class="bi bi-cloud-download"></i>&nbsp;&nbsp;
                                       <i class="bi bi-file-earmark-image-fill"></i>
                                    </button>
                                    <button class="btn btn-secondary" (click)="downloadPDF()">
                                       <i class="bi bi-cloud-download"></i>&nbsp;&nbsp;
                                       <i class="bi bi-file-earmark-pdf"></i>
                                    </button>
                                 </div>
                              </div>
                              <!-- Contenedor Cytoscape responsivo -->
                              <div id="cy"
                                 style="width: 100%; height: calc(100% - 50px); border: 1px solid #ccc; position: relative;">
                                 <!-- Contenido de Cytoscape aquí -->
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</main>