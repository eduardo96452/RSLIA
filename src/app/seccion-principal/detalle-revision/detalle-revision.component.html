<main>
  <div>
    <div [ngClass]="{
      'px-5': isLargeScreen,
      'container': !isLargeScreen
    }">
      <div class="row align-items-start">
        <div class="col-md-12">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <div class="row">
                <div >
                  <li class="breadcrumb-item active" aria-current="page">{{reviewData.titulo_revision}}</li>
                </div>
                
              </div>
            </ol>
          </nav>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col col-sm col-md-2">
          <div class="d-flex">
            <div class="floating-menu">
              <!-- Descripción general -->
              <div class="menu-item active" [routerLink]="['/detalle_revision']" [queryParams]="{ id: reviewId }">
                Descripción general
              </div>

              <!-- Planificación -->
              <div class="menu-item" [routerLink]="['/planificacion']" [queryParams]="{ id: reviewId }">
                Planificación
              </div>

              <!-- Revisión de datos -->
              <div class="menu-item" [routerLink]="['/estudios']" [queryParams]="{ id: reviewId }">
                Revisión de datos
              </div>

              <!-- Proyección de informes -->
              <div class="menu-item" [routerLink]="['/informes']" [queryParams]="{ id: reviewId }">
                Proyección de informes
              </div>
            </div>
          </div>
          <br />
        </div>

        <div class="col col-sm col-md-10">
          <!-- Tarjeta Principal -->
          <div class="card" style="flex-grow: 1;">
            <div class="card-header">
              <h2 class="card-title mb-0">
                <i class="fa-solid fa-pencil"></i>&nbsp; Editar reseña
              </h2>
            </div>
            <div class="card-body">
              <form [formGroup]="form">
                <!-- Campo Título -->
                <div class="mb-3">
                  <label for="title" class="form-label">Título de la reseña</label>
                  <input type="text" class="form-control" id="title" formControlName="titulo_revision"
                    placeholder="Escribe el título de la reseña" [(ngModel)]="reviewData.titulo_revision"
                    name="titulo_revision" (ngModelChange)="onFieldChange($event)" />
                </div>

                <!-- Campo Selección de Metodología -->
                <div class="input-group mb-3">
                  <label class="input-group-text" for="inputGroupSelect01">Metodología de reseña</label>
                  <select class="form-select" id="inputGroupSelect01" [(ngModel)]="reviewData.tipo_revision"
                    name="tipo_revision" formControlName="tipo_revision" (ngModelChange)="onFieldChange($event)">
                    <option value="Revisión Sistemática">Revisión Sistemática</option>
                    <option value="Meta-análisis">Meta-análisis</option>
                    <option value="Revisión de Alcance">Revisión de Alcance</option>
                  </select>
                </div>

                <!-- Campo Descripción -->
                <div class="mb-3">
                  <label for="description" class="form-label">Descripción de la reseña</label>
                  <textarea class="form-control" id="description" rows="5" formControlName="descripcion"
                    placeholder="Ingrese una descripción detallada de la reseña" [(ngModel)]="reviewData.descripcion"
                    name="description" (ngModelChange)="onFieldChange($event)" maxlength="500">
                  </textarea>
                  <div class="text-end text-muted mt-1">
                    <small>{{ charCount1 }}/500 caracteres</small>
                  </div>
                </div>
              </form>
            </div>
            <div class="card-footer text-end">
              <button [routerLink]="isModified ? null : '/planificacion'" class="btn btn-success" type="submit"
                (click)="isModified ? updateReview() : navigateToNext()">
                <i class="fa-solid" [ngClass]="isModified ? 'fa-save' : 'fa-paper-plane'"></i> &nbsp;
                {{ isModified ? 'Actualizar' : 'Siguiente' }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>